/* Created by Ilya A.Zhulin <ilya.zhulin@hotmail.com> 2020 */
jQuery(function(g){function h(){if(window.innerHeight&&window.scrollMaxY){var a=document.body.scrollWidth;var b=window.innerHeight+window.scrollMaxY}else document.body.scrollHeight>document.body.offsetHeight?(a=document.body.scrollWidth,b=document.body.scrollHeight):document.documentElement&&document.documentElement.scrollHeight>document.documentElement.offsetHeight?(a=document.documentElement.scrollWidth,b=document.documentElement.scrollHeight):(a=document.body.offsetWidth,b=document.body.offsetHeight);
if(self.innerHeight){var e=self.innerWidth;var f=self.innerHeight}else document.documentElement&&document.documentElement.clientHeight?(e=document.documentElement.clientWidth,f=document.documentElement.clientHeight):document.body&&(e=document.body.clientWidth,f=document.body.clientHeight);pageHeight=b<f?f:b;pageWidth=a<e?e:a;$size=[pageWidth,pageHeight,e,f];770>=1*$size[3]?g(".main-slideshow").css("padding-top","calc(100vh - "+g("#slider-sub-bg").height()+"px - "+g(".main-slideshow .uk-slideshow-items").height()+
"px + 1px)"):g(".main-slideshow").removeAttr("style")}g(window).resize(function(){h()});g(document).ready(function(a){function b(){$ids="";jQuery(".sb-questions-receiver li").each(function(){$this=jQuery(this);$class=$this.find("a.sb-lesson").attr("class");$class_array=$class.split(" ");jQuery.each($class_array,function(a,c){-1<c.indexOf("sb-lesson-")&&($ids+=c.replace("sb-lesson-","")+"||")})});return $ids.replace("||toggle||","")}function e(f){setTimeout(function(){a("#"+f).next(".formError").remove()},
5E3)}h();0<jQuery("#cck1r_homework_questions").text().length&&($ids=jQuery("#cck1r_homework_questions").text().replace("COM_CCK_Homework_Questions","").split("||"),jQuery.each($ids,function(a,c){jQuery(".sb-lesson-"+c).closest("li").appendTo(".sb-questions-receiver").find(".uk-h4").removeClass("uk-hidden")}));UIkit.util.on(".sb-word-placeholder","added",function(a,c,b){jQuery(b).parent().children().slice(1).appendTo(".uk-drop-answer-words")});UIkit.util.on(".sb-word-placeholder","start",function(a,
b,d){console.log("started10")});UIkit.util.on(".sb-questions-receiver","added",function(a,c,d){console.log("Added1");jQuery(d).find(".uk-h4").removeClass("uk-hidden");jQuery("#homework_questions").val(b())});UIkit.util.on(".sb-questions-receiver","stop",function(a,c,d){jQuery("#homework_questions").val(b())});UIkit.util.on(".sb-questions-receiver","removed",function(a,c,d){console.log(a);console.log(c);console.log(d);console.log("Removed1");jQuery(d).find("div.uk-h4").addClass("uk-hidden");jQuery("#homework_questions").val(b())});
jQuery(".sb-homework-question").on("click",function(){$this=jQuery(this);$this.closest("li").appendTo(".sb-questions-receiver").find(".uk-h4").removeClass("uk-hidden");jQuery("#homework_questions").val(b());return!1});jQuery("[data-uk-datepicker]").flatpickr({locale:"ru",altInput:!0,dateFormat:"Y-m-d",altFormat:"j M Y",onClose:function(a,b,d){Jdate=Calendar.parseDate(b,0,"%d-%m-%Y");console.log(Calendar.printDate(Jdate,"%Y-%m-%d %H:%M:00"));jQuery("#"+d.element.id+"_hidden").val(Calendar.printDate(Jdate,
"%Y-%m-%d %H:%M:00"))}});a("#tl_period input").each(function(){a(this).prop("checked")?a(".time-"+a(this).val().toLowerCase()).removeClass("uk-hidden"):a(".time-"+a(this).val().toLowerCase()).addClass("uk-hidden").find("select").val("")});a("#tl_period").on("change","input",function(){a(this).prop("checked")?a(".time-"+a(this).val().toLowerCase()).removeClass("uk-hidden"):a(".time-"+a(this).val().toLowerCase()).addClass("uk-hidden").find("select").val("")});a("select[id $= _hour]").on("change",function(){$this=
a(this);$id=$this.attr("id");console.log($id);a("#"+$id+"_finish").find("option").each(function(){$this2=a(this);$val=$this2.attr("value");1*$val<1*$this.val()?$this2.attr("disabled","disabled"):$this2.removeAttr("disabled")})});a("#subjects_list").on("change",function(){$this=a(this);$val=$this.val();0<$val.length?a.ajax({type:"POST",url:"/",data:"tmpl=ajaxscript&t=getLessonImage&e="+$val,success:function(b){a("#img_cont img").css("opacity","0");setTimeout(function(){a("#img_cont").html('<img class="uk-transition-fade" src="/'+
b+'" >')},100);setTimeout(function(){a("#img_cont img").css("opacity","1")},300)}}):a("#img_cont").html('<div id="user-ava-container" class="uk-square-medium uk-flex uk-flex-center uk-flex-middle background-ava uk-float-left uk-light uk-overflow-hidden"><span uk-icon = "icon: image; ratio: 10"></span></div>')});a(".ui-sortable").on("click",".icon-plus",function(){$this=a(this);setTimeout(function(){$this.closest(".ui-sortable").find(".icon-plus:not([uk-icon])").attr("uk-icon","icon: plus-circle").closest(".cck_cgx").addClass("cck_cgx_button");
$this.closest(".ui-sortable").find(".icon-minus:not([uk-icon])").attr("uk-icon","icon: minus-circle");$this.closest(".ui-sortable").find(".icon-circle:not([uk-icon])").attr("uk-icon","icon: move");$this.closest(".ui-sortable").find(".collection-group-wrap:not(.uk-flex)").addClass("uk-flex uk-flex-between uk-flex-middle");$this.closest(".ui-sortable").find("select").addClass("uk-select");$this.closest(".ui-sortable").find("input:not(.uk-input)").addClass("uk-input").addClass("uk-width-1-1");$this.closest(".ui-sortable").find("textarea:not(.uk-textarea)").addClass("uk-textarea").addClass("uk-width-1-1");
$this.closest(".ui-sortable").find(".cck_cgx_form").addClass("uk-width-1-1");$this.closest(".ui-sortable").find(".cck_form").addClass("uk-clearfix").addClass("uk-margin")},100);$this.val()});a(".ui-sortable").each(function(){$this=a(this);$this.find(".icon-plus:not([uk-icon])").attr("uk-icon","icon: plus-circle").closest(".cck_cgx").addClass("cck_cgx_button");$this.find(".icon-minus:not([uk-icon])").attr("uk-icon","icon: minus-circle").closest(".cck_cgx").addClass("cck_cgx_button");$this.find(".icon-circle:not([uk-icon])").attr("uk-icon",
"icon: move").closest(".cck_cgx").addClass("cck_cgx_button");$this.find(".collection-group-wrap:not(.uk-flex)").addClass("uk-flex uk-flex-between uk-flex-middle");$this.find("textarea").addClass("uk-textarea").removeClass("uk-input")});a("input, textarea").each(function(){$this=a(this);0<$this.val().length&&$this.addClass("uk-form-filled")});a("input, textarea").on("blur",function(){$this=a(this);$id=$this.attr("id");0<$this.val().length?$this.addClass("uk-form-filled"):$this.removeClass("uk-form-filled");
e($id)});a("#menu-button").on("click",function(){$this=a(this);$this.hasClass("opened")?UIkit.dropdown("#sb-menu-dropdown").hide(0):(UIkit.dropdown("#sb-menu-dropdown").show(),$this.find("span").attr("uk-icon","icon: close-small; ratio: 2"),$this.addClass("opened"))});UIkit.util.on("#sb-menu-dropdown","hidden",function(){a("#menu-button").removeClass("opened");a("#menu-button span").attr("uk-icon","icon: menu-2; ratio: 2")});UIkit.util.on("#sb-menu-dropdown","hidden",function(){a("#menu-button").removeClass("opened");
a("#tabs-118 > li").removeClass("uk-active");a("#menu-button span").attr("uk-icon","icon: menu-2; ratio: 2")});a("#sb-menu-dropdown ul>li>a").click(function(){$href=a(this).attr("href");window.location=$href});a("#tabs-118 > li").hover(function(){$this=a(this);a("#tabs-118 > li").removeClass("uk-active");UIkit.tab("#tabs-118").show($this.index());$this.addClass("uk-active")});UIkit.util.on("#tab-content-118","hidden",function(){console.log("cloded")});a("#user-toggle").on("hover",function(){$width=
250<a(".uk-navbar-right").width()?a(".uk-navbar-right").width():250;a(".user-menu").css("min-width",$width);UIkit.dropdown(".user-menu").show()});a("#user-toggle").on("mouseout",function(){UIkit.dropdown(".user-menu").hide()});a("#transaction_article").on("change",function(){$this=jQuery(this);a("#transaction_sum").html("");$id=$this.find("option:selected").attr("value");0<$id.length&&($price=a.ajax({type:"POST",url:"/",data:"tmpl=ajaxscript&t=getPrice&e="+$id}),console.log($price),$price.done(function(b){a("#transaction_sum").html(b+
" \u0440\u0443\u0431\u043b\u0435\u0439")}))});a(".sb-button-schedule").on("click",function(){a("#sch_group").val(a(this).attr("data-gid"))})})});